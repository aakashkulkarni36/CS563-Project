Issue #293: Fix for #267, #178 and update of Jackson to v2.9.7
URL: https://github.com/enviroCar/enviroCar-server/pull/293

Commit ID: bf666f15f409227dceecb50123570924aed94ed3

Commit Message: Merge pull request #292 from autermann/fix/178

Fix schema infinite loop

Files Changed (1):
File: rest/src/main/java/org/envirocar/server/rest/resources/JSONSchemaResource.java ======================
    - Additions: 7
    - Deletions: 13
=======================================================

    ---Removed (old line 19): 
    ---Removed (old line 30): import javax.ws.rs.core.Response;
    ---Removed (old line 73):         UriBuilder builder
    ---Removed (old line 74):                 = getUriInfo().getRequestUriBuilder().path("{schema}");
    ---Removed (old line 75):         for (String path : this.schemaPaths) {
    ---Removed (old line 76):             schemas.add(builder.build(path.replaceFirst("/schema/", "")).toString());
    ---Removed (old line 77):         }
    +++Added (new line 71):         UriBuilder builder = getUriInfo().getRequestUriBuilder().path("{schema}");
    +++Added (new line 72):         this.schemaPaths.stream()
    +++Added (new line 73):                 .map(path -> path.replaceFirst("/schema/", ""))
    +++Added (new line 74):                 .map(path -> builder.build(path))
    +++Added (new line 75):                 .map(URI::toString)
    +++Added (new line 76):                 .forEach(schemas::add);
    ---Removed (old line 85):         if (!schema.endsWith(".json")) {
    ---Removed (old line 86):             String path = getUriInfo() .getPath() + ".json";
    ---Removed (old line 87):             URI uri = getUriInfo().getBaseUriBuilder().path(path).build();
    ---Removed (old line 88):             throw new WebApplicationException(Response.temporaryRedirect(uri).build());
    ---Removed (old line 89):         }
    ---Removed (old line 90):         String schemaPath = "/schema/" + schema;
    +++Added (new line 84):         String schemaPath = "/schema/" + (schema.endsWith(".json") ? schema : schema + ".json");

